import{c as Ot,i as Wt,a as F,r as z,b as ft,u as zt,w as Y,d as Ft,e as jt,t as B,_ as O,f as W,g as Gt,h as c,o,j as _,k as $,l as g,m as j,n as f,p as yt,q as Zt,s as tt,v as Rt,x as b,y as et,z as Xt,A as Kt,B as Jt,C as Qt,D as Dt,E as at,F as _t,G as st,H as E,N as Yt,I as nt,J as R,K as V,L as v,M as L,O as P,P as $t,Q as te,R as ee,S as N,T,U as se,V as ae,W as qt,X as Q,Y as ne,Z as ie,$ as re,a0 as oe,a1 as St,a2 as it,a3 as rt,a4 as le,a5 as gt,a6 as ct,a7 as ut,a8 as X,a9 as Vt,aa as D,ab as ce,ac as ue,ad as vt,ae as de,af as he}from"./logger-BkkxmT-V.chunk.mjs";var pe="M12,5A3.5,3.5 0 0,0 8.5,8.5A3.5,3.5 0 0,0 12,12A3.5,3.5 0 0,0 15.5,8.5A3.5,3.5 0 0,0 12,5M12,7A1.5,1.5 0 0,1 13.5,8.5A1.5,1.5 0 0,1 12,10A1.5,1.5 0 0,1 10.5,8.5A1.5,1.5 0 0,1 12,7M5.5,8A2.5,2.5 0 0,0 3,10.5C3,11.44 3.53,12.25 4.29,12.68C4.65,12.88 5.06,13 5.5,13C5.94,13 6.35,12.88 6.71,12.68C7.08,12.47 7.39,12.17 7.62,11.81C6.89,10.86 6.5,9.7 6.5,8.5C6.5,8.41 6.5,8.31 6.5,8.22C6.2,8.08 5.86,8 5.5,8M18.5,8C18.14,8 17.8,8.08 17.5,8.22C17.5,8.31 17.5,8.41 17.5,8.5C17.5,9.7 17.11,10.86 16.38,11.81C16.5,12 16.63,12.15 16.78,12.3C16.94,12.45 17.1,12.58 17.29,12.68C17.65,12.88 18.06,13 18.5,13C18.94,13 19.35,12.88 19.71,12.68C20.47,12.25 21,11.44 21,10.5A2.5,2.5 0 0,0 18.5,8M12,14C9.66,14 5,15.17 5,17.5V19H19V17.5C19,15.17 14.34,14 12,14M4.71,14.55C2.78,14.78 0,15.76 0,17.5V19H3V17.07C3,16.06 3.69,15.22 4.71,14.55M19.29,14.55C20.31,15.22 21,16.06 21,17.07V19H24V17.5C24,15.76 21.22,14.78 19.29,14.55M12,16C13.53,16 15.24,16.5 16.23,17H7.77C8.76,16.5 10.47,16 12,16Z",me="M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z",fe="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z";const ge=Symbol.for("nc:theme:enforced");function ve(a){const r=F(()=>B(a)??document.body),n=z(ft(r.value)),t=Ft();function e(){n.value=ft(r.value)}return zt(r,e,{attributes:!0}),Y(r,e),Y(t,e,{immediate:!0}),jt(n)}const be=Ot(()=>ve());function _e(){const a=be(),r=Wt(ge,void 0);return F(()=>r?.value?r.value==="dark":a.value)}const ye=["aria-labelledby"],Se={key:0,class:"empty-content__icon","aria-hidden":"true"},we=["id"],xe={key:2,class:"empty-content__description"},ke={key:3,class:"empty-content__action"},Ce=W({__name:"NcEmptyContent",props:{description:{default:""},name:{default:""}},setup(a){const r=Gt();return(n,t)=>(o(),c("div",{"aria-labelledby":g(r),class:"empty-content",role:"note"},[n.$slots.icon?(o(),c("div",Se,[$(n.$slots,"icon",{},void 0,!0)])):_("",!0),n.name!==""||n.$slots.name?(o(),c("div",{key:1,id:g(r),class:"empty-content__name"},[$(n.$slots,"name",{},()=>[j(f(n.name),1)],!0)],8,we)):_("",!0),n.description!==""||n.$slots.description?(o(),c("p",xe,[$(n.$slots,"description",{},()=>[j(f(n.description),1)],!0)])):_("",!0),n.$slots.action?(o(),c("div",ke,[$(n.$slots,"action",{},void 0,!0)])):_("",!0)],8,ye))}}),wt=O(Ce,[["__scopeId","data-v-b101d636"]]),Ie=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Me=Object.prototype.toString,Le=a=>Me.call(a)==="[object Object]",K=()=>{};function dt(a){return Array.isArray(a)?a:[a]}function Ae(a,r,n){return Y(a,r,{...n,immediate:!0})}const Bt=Ie?window:void 0;function Z(a){var r;const n=B(a);return(r=n?.$el)!==null&&r!==void 0?r:n}function ht(...a){const r=(t,e,s,i)=>(t.addEventListener(e,s,i),()=>t.removeEventListener(e,s,i)),n=F(()=>{const t=dt(B(a[0])).filter(e=>e!=null);return t.every(e=>typeof e!="string")?t:void 0});return Ae(()=>{var t,e;return[(t=(e=n.value)===null||e===void 0?void 0:e.map(s=>Z(s)))!==null&&t!==void 0?t:[Bt].filter(s=>s!=null),dt(B(n.value?a[1]:a[0])),dt(g(n.value?a[2]:a[1])),B(n.value?a[3]:a[2])]},([t,e,s,i],h,p)=>{if(!t?.length||!e?.length||!s?.length)return;const C=Le(i)?{...i}:i,k=t.flatMap(y=>e.flatMap(A=>s.map(w=>r(y,A,w,C))));p(()=>{k.forEach(y=>y())})},{flush:"post"})}function xt(a,r,n={}){const{window:t=Bt,ignore:e=[],capture:s=!0,detectIframe:i=!1,controls:h=!1}=n;if(!t)return h?{stop:K,cancel:K,trigger:K}:K;let p=!0;const C=l=>B(e).some(m=>{if(typeof m=="string")return Array.from(t.document.querySelectorAll(m)).some(S=>S===l.target||l.composedPath().includes(S));{const S=Z(m);return S&&(l.target===S||l.composedPath().includes(S))}});function k(l){const m=B(l);return m&&m.$.subTree.shapeFlag===16}function y(l,m){const S=B(l),x=S.$.subTree&&S.$.subTree.children;return x==null||!Array.isArray(x)?!1:x.some(H=>H.el===m.target||m.composedPath().includes(H.el))}const A=l=>{const m=Z(a);if(l.target!=null&&!(!(m instanceof Element)&&k(a)&&y(a,l))&&!(!m||m===l.target||l.composedPath().includes(m))){if("detail"in l&&l.detail===0&&(p=!C(l)),!p){p=!0;return}r(l)}};let w=!1;const d=[ht(t,"click",l=>{w||(w=!0,setTimeout(()=>{w=!1},0),A(l))},{passive:!0,capture:s}),ht(t,"pointerdown",l=>{const m=Z(a);p=!C(l)&&!!(m&&!l.composedPath().includes(m))},{passive:!0}),i&&ht(t,"blur",l=>{setTimeout(()=>{var m;const S=Z(a);((m=t.document.activeElement)===null||m===void 0?void 0:m.tagName)==="IFRAME"&&!S?.contains(t.document.activeElement)&&r(l)},0)},{passive:!0})].filter(Boolean),u=()=>d.forEach(l=>l());return h?{stop:u,cancel:()=>{p=!1},trigger:l=>{p=!0,A(l),p=!1}}:u}const pt=new WeakMap,Te={mounted(a,r){const n=!r.modifiers.bubble;let t;if(typeof r.value=="function")t=xt(a,r.value,{capture:n});else{const[e,s]=r.value;t=xt(a,e,Object.assign({capture:n},s))}pt.set(a,t)},unmounted(a){const r=pt.get(a);r&&typeof r=="function"?r():r?.stop(),pt.delete(a)}};function Ue(a,r){const n=(k,y)=>k.startsWith(y)?k.slice(y.length):k,t=(k,...y)=>y.reduce((A,w)=>n(A,w),k);if(!a)return null;const e=/^https?:\/\//.test(r),s=/^[a-z][a-z0-9+.-]*:.+/.test(r);if(!e&&s||e&&!r.startsWith(yt())||!e&&!r.startsWith("/"))return null;const i=e?t(r,yt(),"/index.php"):r,h=t(a.options.history.base,Zt(),"/index.php"),p=t(i,h)||"/",C=a.resolve(p);return C.matched.length?C.fullPath:null}function Ne(a){return window._nc_contacts_menu_hooks?Object.values(window._nc_contacts_menu_hooks).filter(r=>r.enabled(a)):[]}const De=new Int32Array(4);class I{static hashStr(r,n=!1){return this.onePassHasher.start().appendStr(r).end(n)}static hashAsciiStr(r,n=!1){return this.onePassHasher.start().appendAsciiStr(r).end(n)}static stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]);static buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);static hexChars="0123456789abcdef";static hexOut=[];static onePassHasher=new I;static _hex(r){const n=I.hexChars,t=I.hexOut;let e,s,i,h;for(h=0;h<4;h+=1)for(s=h*8,e=r[h],i=0;i<8;i+=2)t[s+1+i]=n.charAt(e&15),e>>>=4,t[s+0+i]=n.charAt(e&15),e>>>=4;return t.join("")}static _md5cycle(r,n){let t=r[0],e=r[1],s=r[2],i=r[3];t+=(e&s|~e&i)+n[0]-680876936|0,t=(t<<7|t>>>25)+e|0,i+=(t&e|~t&s)+n[1]-389564586|0,i=(i<<12|i>>>20)+t|0,s+=(i&t|~i&e)+n[2]+606105819|0,s=(s<<17|s>>>15)+i|0,e+=(s&i|~s&t)+n[3]-1044525330|0,e=(e<<22|e>>>10)+s|0,t+=(e&s|~e&i)+n[4]-176418897|0,t=(t<<7|t>>>25)+e|0,i+=(t&e|~t&s)+n[5]+1200080426|0,i=(i<<12|i>>>20)+t|0,s+=(i&t|~i&e)+n[6]-1473231341|0,s=(s<<17|s>>>15)+i|0,e+=(s&i|~s&t)+n[7]-45705983|0,e=(e<<22|e>>>10)+s|0,t+=(e&s|~e&i)+n[8]+1770035416|0,t=(t<<7|t>>>25)+e|0,i+=(t&e|~t&s)+n[9]-1958414417|0,i=(i<<12|i>>>20)+t|0,s+=(i&t|~i&e)+n[10]-42063|0,s=(s<<17|s>>>15)+i|0,e+=(s&i|~s&t)+n[11]-1990404162|0,e=(e<<22|e>>>10)+s|0,t+=(e&s|~e&i)+n[12]+1804603682|0,t=(t<<7|t>>>25)+e|0,i+=(t&e|~t&s)+n[13]-40341101|0,i=(i<<12|i>>>20)+t|0,s+=(i&t|~i&e)+n[14]-1502002290|0,s=(s<<17|s>>>15)+i|0,e+=(s&i|~s&t)+n[15]+1236535329|0,e=(e<<22|e>>>10)+s|0,t+=(e&i|s&~i)+n[1]-165796510|0,t=(t<<5|t>>>27)+e|0,i+=(t&s|e&~s)+n[6]-1069501632|0,i=(i<<9|i>>>23)+t|0,s+=(i&e|t&~e)+n[11]+643717713|0,s=(s<<14|s>>>18)+i|0,e+=(s&t|i&~t)+n[0]-373897302|0,e=(e<<20|e>>>12)+s|0,t+=(e&i|s&~i)+n[5]-701558691|0,t=(t<<5|t>>>27)+e|0,i+=(t&s|e&~s)+n[10]+38016083|0,i=(i<<9|i>>>23)+t|0,s+=(i&e|t&~e)+n[15]-660478335|0,s=(s<<14|s>>>18)+i|0,e+=(s&t|i&~t)+n[4]-405537848|0,e=(e<<20|e>>>12)+s|0,t+=(e&i|s&~i)+n[9]+568446438|0,t=(t<<5|t>>>27)+e|0,i+=(t&s|e&~s)+n[14]-1019803690|0,i=(i<<9|i>>>23)+t|0,s+=(i&e|t&~e)+n[3]-187363961|0,s=(s<<14|s>>>18)+i|0,e+=(s&t|i&~t)+n[8]+1163531501|0,e=(e<<20|e>>>12)+s|0,t+=(e&i|s&~i)+n[13]-1444681467|0,t=(t<<5|t>>>27)+e|0,i+=(t&s|e&~s)+n[2]-51403784|0,i=(i<<9|i>>>23)+t|0,s+=(i&e|t&~e)+n[7]+1735328473|0,s=(s<<14|s>>>18)+i|0,e+=(s&t|i&~t)+n[12]-1926607734|0,e=(e<<20|e>>>12)+s|0,t+=(e^s^i)+n[5]-378558|0,t=(t<<4|t>>>28)+e|0,i+=(t^e^s)+n[8]-2022574463|0,i=(i<<11|i>>>21)+t|0,s+=(i^t^e)+n[11]+1839030562|0,s=(s<<16|s>>>16)+i|0,e+=(s^i^t)+n[14]-35309556|0,e=(e<<23|e>>>9)+s|0,t+=(e^s^i)+n[1]-1530992060|0,t=(t<<4|t>>>28)+e|0,i+=(t^e^s)+n[4]+1272893353|0,i=(i<<11|i>>>21)+t|0,s+=(i^t^e)+n[7]-155497632|0,s=(s<<16|s>>>16)+i|0,e+=(s^i^t)+n[10]-1094730640|0,e=(e<<23|e>>>9)+s|0,t+=(e^s^i)+n[13]+681279174|0,t=(t<<4|t>>>28)+e|0,i+=(t^e^s)+n[0]-358537222|0,i=(i<<11|i>>>21)+t|0,s+=(i^t^e)+n[3]-722521979|0,s=(s<<16|s>>>16)+i|0,e+=(s^i^t)+n[6]+76029189|0,e=(e<<23|e>>>9)+s|0,t+=(e^s^i)+n[9]-640364487|0,t=(t<<4|t>>>28)+e|0,i+=(t^e^s)+n[12]-421815835|0,i=(i<<11|i>>>21)+t|0,s+=(i^t^e)+n[15]+530742520|0,s=(s<<16|s>>>16)+i|0,e+=(s^i^t)+n[2]-995338651|0,e=(e<<23|e>>>9)+s|0,t+=(s^(e|~i))+n[0]-198630844|0,t=(t<<6|t>>>26)+e|0,i+=(e^(t|~s))+n[7]+1126891415|0,i=(i<<10|i>>>22)+t|0,s+=(t^(i|~e))+n[14]-1416354905|0,s=(s<<15|s>>>17)+i|0,e+=(i^(s|~t))+n[5]-57434055|0,e=(e<<21|e>>>11)+s|0,t+=(s^(e|~i))+n[12]+1700485571|0,t=(t<<6|t>>>26)+e|0,i+=(e^(t|~s))+n[3]-1894986606|0,i=(i<<10|i>>>22)+t|0,s+=(t^(i|~e))+n[10]-1051523|0,s=(s<<15|s>>>17)+i|0,e+=(i^(s|~t))+n[1]-2054922799|0,e=(e<<21|e>>>11)+s|0,t+=(s^(e|~i))+n[8]+1873313359|0,t=(t<<6|t>>>26)+e|0,i+=(e^(t|~s))+n[15]-30611744|0,i=(i<<10|i>>>22)+t|0,s+=(t^(i|~e))+n[6]-1560198380|0,s=(s<<15|s>>>17)+i|0,e+=(i^(s|~t))+n[13]+1309151649|0,e=(e<<21|e>>>11)+s|0,t+=(s^(e|~i))+n[4]-145523070|0,t=(t<<6|t>>>26)+e|0,i+=(e^(t|~s))+n[11]-1120210379|0,i=(i<<10|i>>>22)+t|0,s+=(t^(i|~e))+n[2]+718787259|0,s=(s<<15|s>>>17)+i|0,e+=(i^(s|~t))+n[9]-343485551|0,e=(e<<21|e>>>11)+s|0,r[0]=t+r[0]|0,r[1]=e+r[1]|0,r[2]=s+r[2]|0,r[3]=i+r[3]|0}_dataLength=0;_bufferLength=0;_state=new Int32Array(4);_buffer=new ArrayBuffer(68);_buffer8;_buffer32;constructor(){this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(I.stateIdentity),this}appendStr(r){const n=this._buffer8,t=this._buffer32;let e=this._bufferLength,s,i;for(i=0;i<r.length;i+=1){if(s=r.charCodeAt(i),s<128)n[e++]=s;else if(s<2048)n[e++]=(s>>>6)+192,n[e++]=s&63|128;else if(s<55296||s>56319)n[e++]=(s>>>12)+224,n[e++]=s>>>6&63|128,n[e++]=s&63|128;else{if(s=(s-55296)*1024+(r.charCodeAt(++i)-56320)+65536,s>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");n[e++]=(s>>>18)+240,n[e++]=s>>>12&63|128,n[e++]=s>>>6&63|128,n[e++]=s&63|128}e>=64&&(this._dataLength+=64,I._md5cycle(this._state,t),e-=64,t[0]=t[16])}return this._bufferLength=e,this}appendAsciiStr(r){const n=this._buffer8,t=this._buffer32;let e=this._bufferLength,s,i=0;for(;;){for(s=Math.min(r.length-i,64-e);s--;)n[e++]=r.charCodeAt(i++);if(e<64)break;this._dataLength+=64,I._md5cycle(this._state,t),e=0}return this._bufferLength=e,this}appendByteArray(r){const n=this._buffer8,t=this._buffer32;let e=this._bufferLength,s,i=0;for(;;){for(s=Math.min(r.length-i,64-e);s--;)n[e++]=r[i++];if(e<64)break;this._dataLength+=64,I._md5cycle(this._state,t),e=0}return this._bufferLength=e,this}getState(){const r=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[r[0],r[1],r[2],r[3]]}}setState(r){const n=r.buffer,t=r.state,e=this._state;let s;for(this._dataLength=r.length,this._bufferLength=r.buflen,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],s=0;s<n.length;s+=1)this._buffer8[s]=n.charCodeAt(s)}end(r=!1){const n=this._bufferLength,t=this._buffer8,e=this._buffer32,s=(n>>2)+1;this._dataLength+=n;const i=this._dataLength*8;if(t[n]=128,t[n+1]=t[n+2]=t[n+3]=0,e.set(I.buffer32Identity.subarray(s),s),n>55&&(I._md5cycle(this._state,e),e.set(I.buffer32Identity)),i<=4294967295)e[14]=i;else{const h=i.toString(16).match(/(.*?)(.{0,8})$/);if(h===null)return r?De:"";const p=parseInt(h[2],16),C=parseInt(h[1],16)||0;e[14]=p,e[15]=C}return I._md5cycle(this._state,e),r?this._state:I._hex(this._state)}}if(I.hashStr("hello")!=="5d41402abc4b2a76b9719d911017c592")throw new Error("Md5 self test failed.");tt(Rt);class M{constructor(r,n,t,e){this.r=r,this.g=n,this.b=t,this.name=e,this.r=Math.min(r,255),this.g=Math.min(n,255),this.b=Math.min(t,255),this.name=e}get color(){const r=n=>`00${n.toString(16)}`.slice(-2);return`#${r(this.r)}${r(this.g)}${r(this.b)}`}}function $e(a,r,n){return{r:(n.r-r.r)/a,g:(n.g-r.g)/a,b:(n.b-r.b)/a}}function mt(a,r,n){const t=[];t.push(r);const e=$e(a,r,n);for(let s=1;s<a;s++){const i=Math.floor(r.r+e.r*s),h=Math.floor(r.g+e.g*s),p=Math.floor(r.b+e.b*s);t.push(new M(i,h,p))}return t}const kt=new M(182,70,157,b("Purple")),Ct=new M(221,203,85,b("Gold")),It=new M(0,130,201,b("Nextcloud blue"));new M(0,0,0,b("Black")),new M(255,255,255,b("White")),new M(191,103,139,b("Rosy brown")),new M(201,136,121,b("Feldspar")),new M(211,169,103,b("Whiskey")),new M(165,184,114,b("Olivine")),new M(110,166,143,b("Acapulco")),new M(55,148,172,b("Boston Blue")),new M(45,115,190,b("Mariner")),new M(91,100,179,b("Blue Violet")),new M(136,85,168,b("Deluge"));function qe(a){const r=mt(a,kt,Ct),n=mt(a,Ct,It),t=mt(a,It,kt);return r.concat(n).concat(t)}function Ve(a){let r=a;a.match(/^([0-9a-f]{4}-?){8}$/)===null&&(r=I.hashStr(a)),r=r.replace(/[^0-9a-f]/g,"");let n=0;for(let t=0;t<r.length;t++)n+=parseInt(r.charAt(t),16);return n}function Mt(a){const r=qe(6),n=Ve(a.toLocaleLowerCase());return r[n%r.length]}var bt={exports:{}},Be=bt.exports,Lt;function Pe(){return Lt||(Lt=1,(function(a){(function(r){if(typeof n!="function"){var n=function(d){return d};n.nonNative=!0}const t=n("plaintext"),e=n("html"),s=n("comment"),i=/<(\w*)>/g,h=/<\/?([^\s\/>]+)/;function p(d,u,l){d=d||"",u=u||[],l=l||"";let m=k(u,l);return y(d,m)}function C(d,u){d=d||[],u=u||"";let l=k(d,u);return function(m){return y(m||"",l)}}p.init_streaming_mode=C;function k(d,u){return d=A(d),{allowable_tags:d,tag_replacement:u,state:t,tag_buffer:"",depth:0,in_quote_char:""}}function y(d,u){if(typeof d!="string")throw new TypeError("'html' parameter must be a string");let l=u.allowable_tags,m=u.tag_replacement,S=u.state,x=u.tag_buffer,H=u.depth,q=u.in_quote_char,G="";for(let lt=0,Ht=d.length;lt<Ht;lt++){let U=d[lt];if(S===t)switch(U){case"<":S=e,x+=U;break;default:G+=U;break}else if(S===e)switch(U){case"<":if(q)break;H++;break;case">":if(q)break;if(H){H--;break}q="",S=t,x+=">",l.has(w(x))?G+=x:G+=m,x="";break;case'"':case"'":U===q?q="":q=q||U,x+=U;break;case"-":x==="<!-"&&(S=s),x+=U;break;case" ":case`
`:if(x==="<"){S=t,G+="< ",x="";break}x+=U;break;default:x+=U;break}else if(S===s)switch(U){case">":x.slice(-2)=="--"&&(S=t),x="";break;default:x+=U;break}}return u.state=S,u.tag_buffer=x,u.depth=H,u.in_quote_char=q,G}function A(d){let u=new Set;if(typeof d=="string"){let l;for(;l=i.exec(d);)u.add(l[1])}else!n.nonNative&&typeof d[n.iterator]=="function"?u=new Set(d):typeof d.forEach=="function"&&d.forEach(u.add,u);return u}function w(d){let u=h.exec(d);return u?u[1].toLowerCase():null}a.exports?a.exports=p:r.striptags=p})(Be)})(bt)),bt.exports}Pe();function Ee(a,r){const n=(r?.size||64)<=64?64:512,t=r?.isGuest?"/guest":"",e=r?.isDarkTheme??ft(document.body)?"/dark":"";return et(`/avatar${t}/{user}/{size}${e}`,{user:a,size:n})}const He=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="0 -960 960 960" width="24px" height="24px" xmlns="http://www.w3.org/2000/svg">
	<path
		fill="var(--user-status-color-away, var(--color-warning, #C88800))"
		d="m612-292 56-56-148-148v-184h-80v216l172 172ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>
</svg>
`,Oe=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="0 -960 960 960" width="24px" height="24px" xmlns="http://www.w3.org/2000/svg">
	<path
		fill="var(--user-status-color-busy, var(--color-error, #DB0606))"
		d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>
</svg>
`,We=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="0 -960 960 960" width="24px" height="24px" xmlns="http://www.w3.org/2000/svg">
	<path
		fill="var(--user-status-color-busy, var(--color-error, #DB0606))"
		d="M280-440h400v-80H280v80ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>
</svg>
`,At=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="0 -960 960 960" width="24px" height="24px" xmlns="http://www.w3.org/2000/svg">
	<path
		fill="var(--user-status-color-offline, var(--color-text-maxcontrast, #6B6B6B))"
		d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/>
</svg>
`,ze=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="0 -960 960 960" width="24px" height="24px" xmlns="http://www.w3.org/2000/svg">
	<path
		fill="var(--user-status-color-online, var(--color-success, #2D7B41))"
		d="m424-296 282-282-56-56-226 226-114-114-56 56 170 170Zm56 216q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>
</svg>
`;tt(Xt),tt(Kt);function Pt(a){switch(a){case"away":return b("away");case"busy":return b("busy");case"dnd":return b("do not disturb");case"online":return b("online");case"invisible":return b("invisible");case"offline":return b("offline");default:return a}}const Fe=["aria-hidden","aria-label","innerHTML"],je=W({__name:"NcUserStatusIcon",props:Jt({user:{default:void 0},ariaHidden:{type:[Boolean,String],default:!1}},{status:{},statusModifiers:{}}),emits:["update:status"],setup(a){const r=Qt(a,"status"),n=a,t=F(()=>r.value&&["invisible","offline"].includes(r.value)),e=F(()=>r.value&&(!n.ariaHidden||n.ariaHidden==="false")?b("User status: {status}",{status:Pt(r.value)}):void 0);Y(()=>n.user,async h=>{if(!r.value&&h&&Dt()?.user_status?.enabled)try{const{data:p}=await at.get(_t("/apps/user_status/api/v1/statuses/{user}",{user:h}));r.value=p.ocs?.data?.status}catch(p){st.debug("Error while fetching user status",{error:p})}},{immediate:!0});const s={online:ze,away:He,busy:Oe,dnd:We,invisible:At,offline:At},i=F(()=>r.value&&s[r.value]);return(h,p)=>r.value?(o(),c("span",{key:0,class:E(["user-status-icon",{"user-status-icon--invisible":t.value}]),"aria-hidden":!e.value||void 0,"aria-label":e.value,role:"img",innerHTML:i.value},null,10,Fe)):_("",!0)}}),Ge=O(je,[["__scopeId","data-v-881a79fb"]]),Ze={beforeUpdate(){this.text=this.getText()},data(){return{text:this.getText()}},computed:{isLongText(){return this.text&&this.text.trim().length>20}},methods:{getText(){return this.$slots.default?.()[0].children?.trim?.()||""}}},ot={mixins:[Ze],props:{icon:{type:String,default:""},name:{type:String,default:""},title:{type:String,default:""},closeAfterClick:{type:Boolean,default:!1},ariaLabel:{type:String,default:null}},inject:{closeMenu:{from:Yt}},emits:["click"],created(){"ariaHidden"in this.$attrs},computed:{isIconUrl(){try{return!!new URL(this.icon,this.icon.startsWith("/")?window.location.origin:void 0)}catch{return!1}}},methods:{onClick(a){this.$emit("click",a),this.closeAfterClick&&this.closeMenu(!1)}}},Re={name:"NcActionButton",components:{NcIconSvgWrapper:R},mixins:[ot],inject:{isInSemanticMenu:{from:nt,default:!1}},props:{disabled:{type:Boolean,default:!1},isMenu:{type:Boolean,default:!1},type:{type:String,default:"button",validator:a=>["button","checkbox","radio","reset","submit"].includes(a)},modelValue:{type:[Boolean,String],default:null},value:{type:String,default:null},description:{type:String,default:""}},emits:["update:modelValue"],setup(){return{mdiCheck:ee,mdiChevronRight:te}},computed:{isFocusable(){return!this.disabled},isChecked(){return this.type==="radio"&&typeof this.modelValue!="boolean"?this.modelValue===this.value:this.modelValue},nativeType(){return this.type==="submit"||this.type==="reset"?this.type:"button"},buttonAttributes(){const a={};return this.isInSemanticMenu?(a.role="menuitem",this.type==="radio"?(a.role="menuitemradio",a["aria-checked"]=this.isChecked?"true":"false"):(this.type==="checkbox"||this.nativeType==="button"&&this.modelValue!==null)&&(a.role="menuitemcheckbox",a["aria-checked"]=this.modelValue===null?"mixed":this.modelValue?"true":"false")):this.modelValue!==null&&this.nativeType==="button"&&(a["aria-pressed"]=this.modelValue?"true":"false"),a}},methods:{handleClick(a){this.onClick(a),(this.modelValue!==null||this.type!=="button")&&(this.type==="radio"?typeof this.modelValue!="boolean"?this.isChecked||this.$emit("update:modelValue",this.value):this.$emit("update:modelValue",!this.isChecked):this.$emit("update:modelValue",!this.isChecked))}}},Xe=["role"],Ke=["aria-label","disabled","title","type"],Je={class:"action-button__longtext-wrapper"},Qe={key:0,class:"action-button__name"},Ye=["textContent"],ts={key:2,class:"action-button__text"},es=["textContent"],ss={key:2,class:"action-button__pressed-icon material-design-icon"};function as(a,r,n,t,e,s){const i=V("NcIconSvgWrapper");return o(),c("li",{class:E(["action",{"action--disabled":n.disabled}]),role:s.isInSemanticMenu&&"presentation"},[v("button",$t({"aria-label":a.ariaLabel,class:["action-button button-vue",{"action-button--active":s.isChecked,focusable:s.isFocusable}],disabled:n.disabled,title:a.title,type:s.nativeType},s.buttonAttributes,{onClick:r[0]||(r[0]=(...h)=>s.handleClick&&s.handleClick(...h))}),[$(a.$slots,"icon",{},()=>[v("span",{class:E([[a.isIconUrl?"action-button__icon--url":a.icon],"action-button__icon"]),style:P({backgroundImage:a.isIconUrl?`url(${a.icon})`:null}),"aria-hidden":"true"},null,6)],!0),v("span",Je,[a.name?(o(),c("strong",Qe,f(a.name),1)):_("",!0),a.isLongText?(o(),c("span",{key:1,class:"action-button__longtext",textContent:f(a.text)},null,8,Ye)):(o(),c("span",ts,f(a.text),1)),n.description?(o(),c("span",{key:3,class:"action-button__description",textContent:f(n.description)},null,8,es)):_("",!0)]),n.isMenu?(o(),L(i,{key:0,class:"action-button__menu-icon",directional:"",path:t.mdiChevronRight},null,8,["path"])):s.isChecked?(o(),L(i,{key:1,path:t.mdiCheck,class:"action-button__pressed-icon"},null,8,["path"])):s.isChecked===!1?(o(),c("span",ss)):_("",!0),_("",!0)],16,Ke)],10,Xe)}const ns=O(Re,[["render",as],["__scopeId","data-v-6c2daf4e"]]),is={name:"NcActionLink",mixins:[ot],inject:{isInSemanticMenu:{from:nt,default:!1}},props:{href:{type:String,required:!0,validator:a=>{try{return new URL(a)}catch{return a.startsWith("#")||a.startsWith("/")}}},download:{type:String,default:null},target:{type:String,default:"_self",validator:a=>a&&(!a.startsWith("_")||["_blank","_self","_parent","_top"].indexOf(a)>-1)},title:{type:String,default:null}}},rs=["role"],os=["download","href","aria-label","target","title","role"],ls={key:0,class:"action-link__longtext-wrapper"},cs={class:"action-link__name"},us=["textContent"],ds=["textContent"],hs={key:2,class:"action-link__text"};function ps(a,r,n,t,e,s){return o(),c("li",{class:"action",role:s.isInSemanticMenu&&"presentation"},[v("a",{download:n.download,href:n.href,"aria-label":a.ariaLabel,target:n.target,title:n.title,class:"action-link focusable",rel:"nofollow noreferrer noopener",role:s.isInSemanticMenu&&"menuitem",onClick:r[0]||(r[0]=(...i)=>a.onClick&&a.onClick(...i))},[$(a.$slots,"icon",{},()=>[v("span",{"aria-hidden":"true",class:E(["action-link__icon",[a.isIconUrl?"action-link__icon--url":a.icon]]),style:P({backgroundImage:a.isIconUrl?`url(${a.icon})`:null})},null,6)],!0),a.name?(o(),c("span",ls,[v("strong",cs,f(a.name),1),r[1]||(r[1]=v("br",null,null,-1)),v("span",{class:"action-link__longtext",textContent:f(a.text)},null,8,us)])):a.isLongText?(o(),c("span",{key:1,class:"action-link__longtext",textContent:f(a.text)},null,8,ds)):(o(),c("span",hs,f(a.text),1)),_("",!0)],8,os)],8,rs)}const ms=O(is,[["render",ps],["__scopeId","data-v-32f01b7a"]]),fs={name:"NcActionRouter",mixins:[ot],inject:{isInSemanticMenu:{from:nt,default:!1}},props:{to:{type:[String,Object],required:!0}}},gs=["role"],vs={key:0,class:"action-router__longtext-wrapper"},bs={class:"action-router__name"},_s=["textContent"],ys=["textContent"],Ss={key:2,class:"action-router__text"};function ws(a,r,n,t,e,s){const i=V("RouterLink");return o(),c("li",{class:"action",role:s.isInSemanticMenu&&"presentation"},[N(i,{"aria-label":a.ariaLabel,class:"action-router focusable",rel:"nofollow noreferrer noopener",role:s.isInSemanticMenu&&"menuitem",title:a.title,to:n.to,onClick:a.onClick},{default:T(()=>[$(a.$slots,"icon",{},()=>[v("span",{"aria-hidden":"true",class:E(["action-router__icon",[a.isIconUrl?"action-router__icon--url":a.icon]]),style:P({backgroundImage:a.isIconUrl?`url(${a.icon})`:null})},null,6)],!0),a.name?(o(),c("span",vs,[v("strong",bs,f(a.name),1),r[0]||(r[0]=v("br",null,null,-1)),v("span",{class:"action-router__longtext",textContent:f(a.text)},null,8,_s)])):a.isLongText?(o(),c("span",{key:1,class:"action-router__longtext",textContent:f(a.text)},null,8,ys)):(o(),c("span",Ss,f(a.text),1)),_("",!0)]),_:3},8,["aria-label","role","title","to","onClick"])],8,gs)}const xs=O(fs,[["render",ws],["__scopeId","data-v-87267750"]]),ks={name:"NcActionText",mixins:[ot],inject:{isInSemanticMenu:{from:nt,default:!1}}},Cs=["role"],Is={key:0,class:"action-text__longtext-wrapper"},Ms={class:"action-text__name"},Ls=["textContent"],As=["textContent"],Ts={key:2,class:"action-text__text"};function Us(a,r,n,t,e,s){return o(),c("li",{class:"action",role:s.isInSemanticMenu&&"presentation"},[v("span",{class:"action-text",onClick:r[0]||(r[0]=(...i)=>a.onClick&&a.onClick(...i))},[$(a.$slots,"icon",{},()=>[a.icon!==""?(o(),c("span",{key:0,"aria-hidden":"true",class:E(["action-text__icon",[a.isIconUrl?"action-text__icon--url":a.icon]]),style:P({backgroundImage:a.isIconUrl?`url(${a.icon})`:null})},null,6)):_("",!0)],!0),a.name?(o(),c("span",Is,[v("strong",Ms,f(a.name),1),v("span",{class:"action-text__longtext",textContent:f(a.text)},null,8,Ls)])):a.isLongText?(o(),c("span",{key:1,class:"action-text__longtext",textContent:f(a.text)},null,8,As)):(o(),c("span",Ts,f(a.text),1)),_("",!0)])],8,Cs)}const Ns=O(ks,[["render",Us],["__scopeId","data-v-fa684b48"]]);tt(se);const Ds={data(){return{hasStatus:!1,userStatus:{status:null,message:null,icon:null}}},methods:{async fetchUserStatus(a){if(!a)return;const r=Dt();if(!(!Object.hasOwn(r,"user_status")||!r.user_status.enabled)&&gt())try{const{data:n}=await at.get(_t("apps/user_status/api/v1/statuses/{userId}",{userId:a}));this.setUserStatus(n.ocs.data)}catch(n){if(n.response.status===404&&n.response.data.ocs?.data?.length===0)return;st.error("Failed to fetch user status",{error:n})}},setUserStatus({status:a,message:r,icon:n}){this.userStatus.status=a||"",this.userStatus.message=r||"",this.userStatus.icon=n||"",this.hasStatus=!!a}}},Et=ae("nextcloud").persist().build();function $s(a){const r=Et.getItem("user-has-avatar."+a);return typeof r=="string"?!!r:null}function Tt(a,r){a&&Et.setItem("user-has-avatar."+a,r)}const qs={name:"NcAvatar",directives:{ClickOutside:Te},components:{IconDotsHorizontal:ie,NcActions:ne,NcButton:Q,NcIconSvgWrapper:R,NcLoadingIcon:qt,NcUserStatusIcon:Ge},mixins:[Ds],props:{url:{type:String,default:void 0},iconClass:{type:String,default:void 0},user:{type:String,default:void 0},hideStatus:{type:Boolean,default:!1},verboseStatus:{type:Boolean,default:!1},preloadedUserStatus:{type:Object,default:void 0},isGuest:{type:Boolean,default:!1},displayName:{type:String,default:void 0},size:{type:Number,default:32},noPlaceholder:{type:Boolean,default:!1},disableTooltip:{type:Boolean,default:!1},disableMenu:{type:Boolean,default:!1},tooltipMessage:{type:String,default:null},isNoUser:{type:Boolean,default:!1},menuContainer:{type:[Boolean,String,Object,Element],default:"body"}},setup(){return{isDarkTheme:_e()}},data(){return{avatarUrlLoaded:null,avatarSrcSetLoaded:null,userDoesNotExist:!1,isAvatarLoaded:!1,isMenuLoaded:!1,contactsMenuLoading:!1,contactsMenuData:{},contactsMenuActions:[],contactsMenuOpenState:!1}},computed:{avatarAriaLabel(){if(this.hasMenu)return this.canDisplayUserStatus||this.showUserStatusIconOnAvatar?b("Avatar of {displayName}, {status}",{displayName:this.displayName??this.user,status:Pt(this.userStatus.status)}):b("Avatar of {displayName}",{displayName:this.displayName??this.user})},canDisplayUserStatus(){return!this.hideStatus&&this.hasStatus&&["online","away","busy","dnd"].includes(this.userStatus.status)},showUserStatusIconOnAvatar(){return!this.hideStatus&&!this.verboseStatus&&this.hasStatus&&this.userStatus.status!=="dnd"&&this.userStatus.icon},userIdentifier(){return this.isDisplayNameDefined?this.displayName:this.isUserDefined?this.user:""},isUserDefined(){return typeof this.user<"u"},isDisplayNameDefined(){return typeof this.displayName<"u"},isUrlDefined(){return typeof this.url<"u"},hasMenu(){return this.disableMenu?!1:this.isMenuLoaded?this.menu.length>0:!(this.user===gt()?.uid||this.userDoesNotExist||this.url)},showInitials(){return!this.noPlaceholder&&this.userDoesNotExist&&!(this.iconClass||this.$slots.icon)},avatarStyle(){return{"--avatar-size":this.size+"px",lineHeight:this.showInitials?this.size+"px":0,fontSize:Math.round(this.size*.45)+"px"}},initialsWrapperStyle(){const{r:a,g:r,b:n}=Mt(this.userIdentifier);return{backgroundColor:`rgba(${a}, ${r}, ${n}, 0.1)`}},initialsStyle(){const{r:a,g:r,b:n}=Mt(this.userIdentifier);return{color:`rgb(${a}, ${r}, ${n})`}},tooltip(){return this.disableTooltip?null:this.tooltipMessage?this.tooltipMessage:this.displayName},initials(){let a="?";if(this.showInitials){const r=this.userIdentifier.trim();if(r==="")return a;const n=r.match(/[\p{L}\p{N}\s]/gu);if(!n)return a;const t=n.join(""),e=t.lastIndexOf(" ");a=String.fromCodePoint(t.codePointAt(0)),e!==-1&&(a=a.concat(String.fromCodePoint(t.codePointAt(e+1))))}return a.toLocaleUpperCase()},menu(){const a=this.contactsMenuActions.map(n=>{const t=Ue(this.$router,n.hyperlink);return{ncActionComponent:t?xs:ms,ncActionComponentProps:t?{to:t,icon:n.icon}:{href:n.hyperlink,icon:n.icon},text:n.title}});for(const n of Ne(this.contactsMenuData))try{a.push({ncActionComponent:ns,ncActionComponentProps:{onClick:()=>n.callback(this.contactsMenuData)},text:n.displayName(this.contactsMenuData),iconSvg:n.iconSvg(this.contactsMenuData)})}catch(t){st.error(`Failed to render ContactsMenu action ${n.id}`,{error:t,action:n})}function r(n){const t=document.createTextNode(n),e=document.createElement("p");return e.appendChild(t),e.innerHTML}if(!this.hideStatus&&(this.userStatus.icon||this.userStatus.message)){const n=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
					<text x="50%" y="50%" text-anchor="middle" style="dominant-baseline: central; font-size: 85%">${r(this.userStatus.icon)}</text>
				</svg>`;return[{ncActionComponent:Ns,ncActionComponentProps:{},iconSvg:this.userStatus.icon?n:void 0,text:`${this.userStatus.message}`}].concat(a)}return a}},watch:{url(){this.userDoesNotExist=!1,this.loadAvatarUrl()},user(){this.userDoesNotExist=!1,this.isMenuLoaded=!1,this.loadAvatarUrl()}},mounted(){this.loadAvatarUrl(),ut("settings:avatar:updated",this.loadAvatarUrl),ut("settings:display-name:updated",this.loadAvatarUrl),!this.hideStatus&&this.user&&!this.isNoUser?(this.preloadedUserStatus?this.setUserStatus(this.preloadedUserStatus):this.fetchUserStatus(this.user),ut("user_status:status.updated",this.handleUserStatusUpdated)):!this.hideStatus&&this.preloadedUserStatus&&this.setUserStatus(this.preloadedUserStatus)},beforeUnmount(){ct("settings:avatar:updated",this.loadAvatarUrl),ct("settings:display-name:updated",this.loadAvatarUrl),ct("user_status:status.updated",this.handleUserStatusUpdated)},methods:{t:b,handleUserStatusUpdated(a){this.user===a.userId&&(this.userStatus={status:a.status,icon:a.icon,message:a.message},this.hasStatus=a.status!==null)},async toggleMenu(a){a.type==="keydown"&&a.key!=="Enter"||(this.contactsMenuOpenState||await this.fetchContactsMenu(),this.contactsMenuOpenState=!this.contactsMenuOpenState)},closeMenu(){this.contactsMenuOpenState=!1},async fetchContactsMenu(){this.contactsMenuLoading=!0;try{const a=encodeURIComponent(this.user),{data:r}=await at.post(et("contactsmenu/findOne"),`shareType=0&shareWith=${a}`);this.contactsMenuData=r,this.contactsMenuActions=r.topAction?[r.topAction].concat(r.actions):r.actions}catch{this.contactsMenuOpenState=!1}this.contactsMenuLoading=!1,this.isMenuLoaded=!0},loadAvatarUrl(){if(this.isAvatarLoaded=!1,!this.isUrlDefined&&(!this.isUserDefined||this.isNoUser||this.iconClass||this.$slots.icon)){this.isAvatarLoaded=!0,this.userDoesNotExist=!0;return}if(this.isUrlDefined){this.updateImageIfValid(this.url);return}if(this.size<=64){const a=this.avatarUrlGenerator(this.user,64),r=[a+" 1x",this.avatarUrlGenerator(this.user,512)+" 8x"].join(", ");this.updateImageIfValid(a,r)}else{const a=this.avatarUrlGenerator(this.user,512);this.updateImageIfValid(a)}},avatarUrlGenerator(a,r){let n=Ee(a,{size:r,isDarkTheme:this.isDarkTheme,isGuest:this.isGuest});return a===gt()?.uid&&typeof oc_userconfig<"u"&&(n+="?v="+window.oc_userconfig.avatar.version),n},updateImageIfValid(a,r=null){const n=$s(this.user);if(this.isUserDefined&&typeof n=="boolean"){this.isAvatarLoaded=!0,this.avatarUrlLoaded=a,r&&(this.avatarSrcSetLoaded=r),n===!1&&(this.userDoesNotExist=!0);return}const t=new Image;t.onload=()=>{this.avatarUrlLoaded=a,r&&(this.avatarSrcSetLoaded=r),this.isAvatarLoaded=!0,Tt(this.user,!0)},t.onerror=e=>{st.debug("[NcAvatar] Invalid avatar url",{error:e,url:a}),this.avatarUrlLoaded=null,this.avatarSrcSetLoaded=null,this.userDoesNotExist=!0,this.isAvatarLoaded=!1,Tt(this.user,!1)},r&&(t.srcset=r),t.src=a}}},Vs=["title"],Bs=["src","srcset"],Ps={key:2,class:"avatardiv__user-status avatardiv__user-status--icon"};function Es(a,r,n,t,e,s){const i=V("NcLoadingIcon"),h=V("IconDotsHorizontal"),p=V("NcButton"),C=V("NcIconSvgWrapper"),k=V("NcActions"),y=V("NcUserStatusIcon"),A=re("click-outside");return oe((o(),c("span",{class:E(["avatardiv popovermenu-wrapper",{"avatardiv--unknown":e.userDoesNotExist,"avatardiv--with-menu":s.hasMenu,"avatardiv--with-menu-loading":e.contactsMenuLoading}]),style:P(s.avatarStyle),title:s.tooltip},[$(a.$slots,"icon",{},()=>[n.iconClass?(o(),c("span",{key:0,class:E([n.iconClass,"avatar-class-icon"])},null,2)):e.isAvatarLoaded&&!e.userDoesNotExist?(o(),c("img",{key:1,src:e.avatarUrlLoaded,srcset:e.avatarSrcSetLoaded,alt:""},null,8,Bs)):_("",!0)],!0),s.hasMenu&&s.menu.length===0?(o(),L(p,{key:0,"aria-label":s.avatarAriaLabel,class:"action-item action-item__menutoggle",variant:"tertiary-no-background",onClick:s.toggleMenu},{icon:T(()=>[e.contactsMenuLoading?(o(),L(i,{key:0})):(o(),L(h,{key:1,size:20}))]),_:1},8,["aria-label","onClick"])):s.hasMenu?(o(),L(k,{key:1,open:e.contactsMenuOpenState,"onUpdate:open":r[0]||(r[0]=w=>e.contactsMenuOpenState=w),"aria-label":s.avatarAriaLabel,container:n.menuContainer,"force-menu":"","manual-open":"",variant:"tertiary-no-background",onClick:s.toggleMenu},St({default:T(()=>[(o(!0),c(it,null,rt(s.menu,(w,d)=>(o(),L(le(w.ncActionComponent),$t({key:d},{ref_for:!0},w.ncActionComponentProps),St({default:T(()=>[j(" "+f(w.text),1)]),_:2},[w.iconSvg?{name:"icon",fn:T(()=>[N(C,{svg:w.iconSvg},null,8,["svg"])]),key:"0"}:void 0]),1040))),128))]),_:2},[e.contactsMenuLoading?{name:"icon",fn:T(()=>[N(i)]),key:"0"}:void 0]),1032,["open","aria-label","container","onClick"])):_("",!0),s.showUserStatusIconOnAvatar?(o(),c("span",Ps,f(a.userStatus.icon),1)):s.canDisplayUserStatus?(o(),L(y,{key:3,class:"avatardiv__user-status",status:a.userStatus.status,"aria-hidden":String(s.hasMenu)},null,8,["status","aria-hidden"])):_("",!0),s.showInitials?(o(),c("span",{key:4,style:P(s.initialsWrapperStyle),class:"avatardiv__initials-wrapper"},[v("span",{style:P(s.initialsStyle),class:"avatardiv__initials"},f(s.initials),5)],4)):_("",!0)],14,Vs)),[[A,s.closeMenu]])}const Hs=O(qs,[["render",Es],["__scopeId","data-v-d7dc2a1f"]]),Os={class:"team-members"},Ws={class:"team-members__list"},zs={key:0,class:"team-members__more"},Fs=W({__name:"TeamMembers",props:{members:{}},setup(a){return(r,n)=>(o(),c("div",Os,[v("ul",Ws,[(o(!0),c(it,null,rt(a.members.slice(0,5),t=>(o(),c("li",{key:t.userId||t.singleId,class:"team-members__item"},[N(g(Hs),{user:t.isUser?t.userId:void 0,"display-name":t.displayName,"is-no-user":!t.isUser,size:36,class:"team-members__avatar"},null,8,["user","display-name","is-no-user"]),a.members.length>5?(o(),c("span",zs," +"+f(a.members.length-5),1)):_("",!0)]))),128))])]))}}),js=X(Fs,[["__scopeId","data-v-eb6b4dbf"]]),Gs={class:"team-resources"},Zs={class:"team-resources__list"},Rs=["title"],Xs=["href"],Ks=["src","alt"],Js={key:0,class:"team-resources__box"},Qs=["href"],Ys={class:"team-resources__link-more"},ta=W({__name:"TeamResources",props:{resources:{},teamUrl:{}},setup(a){return(r,n)=>(o(),c("div",Gs,[v("ul",Zs,[(o(!0),c(it,null,rt(a.resources.slice(0,5),t=>(o(),c("li",{key:t.id,class:"team-resources__box",title:t.name,style:P({"--fallback-icon":`url('${t.fallbackIcon}')`})},[v("a",{href:t.url,class:"team-resources__link"},[v("img",{src:t.iconUrl,class:"team-resources__icon",alt:t.name},null,8,Ks)],8,Xs)],12,Rs))),128)),a.resources.length>5?(o(),c("li",Js,[v("a",{href:a.teamUrl,class:"team-resources__link"},[v("div",Ys,"+"+f(a.resources.length-5),1)],8,Qs)])):_("",!0)])]))}}),ea=X(ta,[["__scopeId","data-v-10c6babe"]]),sa={class:"teams-list-item"},aa={class:"teams-list-item__header"},na=["href"],ia={class:"teams-list-item__header-name"},ra={key:1,class:"teams-list-item__spacer"},oa=W({__name:"TeamsListItem",props:{team:{}},setup(a){return(r,n)=>(o(),c("li",sa,[v("div",aa,[v("a",{href:a.team.url,class:"teams-list-item__header-link"},[v("h3",ia,f(a.team.displayName),1),N(g(R),{class:"teams-list-item__header-icon",inline:"",path:g(fe)},null,8,["path"])],8,na)]),a.team.members&&a.team.members.length>0?(o(),L(js,{key:0,members:a.team.members},null,8,["members"])):_("",!0),a.team.members?.length&&a.team.resources?.length?(o(),c("div",ra)):_("",!0),a.team.resources&&a.team.resources.length>0?(o(),L(ea,{key:2,resources:a.team.resources,"team-url":a.team.url},null,8,["resources","team-url"])):_("",!0)]))}}),la=X(oa,[["__scopeId","data-v-dbe7baef"]]),ca=["aria-label"],ua=W({__name:"TeamsList",props:{teams:{}},setup(a,{expose:r}){r({scrollTop:t});const n=Vt("teamsList");function t(){n.value&&(n.value.scrollTop=0)}return(e,s)=>(o(),c("ul",{ref:"teamsList","aria-label":g(D)("circles","Teams"),class:"teams-list"},[(o(!0),c(it,null,rt(a.teams,i=>(o(),L(la,{key:i.id,team:i},null,8,["team"]))),128))],8,ca))}}),da=X(ua,[["__scopeId","data-v-f5172c72"]]),ha={class:"teams-dashboard-widget"},pa={key:3,class:"teams-dashboard-widget__container"},ma={key:0,class:"teams-dashboard-widget__actions"},J=3,fa=W({__name:"DashboardTeamsWidget",setup(a){const r=et("/apps/contacts/#/circles"),n=Vt("teamsListKey"),t=z([]),e=z(!1),s=z(!1),i=z(0),h=z(!0);ce(()=>p());async function p(k=!1){e.value=!0,s.value=!1;try{const y=new URLSearchParams({limit:J.toString(),offset:i.value.toString()}),{data:A}=await at.get(_t(`apps/circles/teams/dashboard/widget?${y}`)),w=A.ocs.data||[],d=w.map(u=>({id:u.singleId,displayName:u.displayName||u.name,url:u.url,members:(u.members||[]).map(l=>({userId:l.userId||l.singleId,displayName:l.displayName,type:l.type,isUser:l.type===1,url:et(`/u/${l.userId||l.singleId}`)})),resources:u.resources||[]}));k?(t.value.push(...d),i.value+=J):(t.value=d,i.value=J,ue(()=>{n.value&&n.value.scrollTop()})),h.value=w.length===J}catch(y){s.value=!0,vt.error("Failed to load teams",{error:y}),de(D("circles","Failed to load teams")),k||(t.value=[])}finally{e.value=!1}}async function C(){!h.value||e.value||await p(!0)}return(k,y)=>(o(),c("div",ha,[e.value?(o(),L(g(qt),{key:0,size:48})):s.value?(o(),L(g(wt),{key:1,name:g(D)("circles","Failed to load teams")},{icon:T(()=>[N(g(R),{path:g(me)},null,8,["path"])]),action:T(()=>[N(g(Q),{onClick:y[0]||(y[0]=A=>p())},{default:T(()=>[j(f(g(D)("circles","Try again")),1)]),_:1})]),_:1},8,["name"])):t.value.length===0?(o(),L(g(wt),{key:2,name:g(D)("circles","No teams found"),description:g(D)("circles","Join or create teams to see them here.")},{icon:T(()=>[N(g(R),{path:g(pe)},null,8,["path"])]),action:T(()=>[N(g(Q),{href:g(r)},{default:T(()=>[j(f(g(D)("circles","Create your first team")),1)]),_:1},8,["href"])]),_:1},8,["name","description"])):(o(),c("div",pa,[N(da,{ref:"teamsListKey",teams:t.value},null,8,["teams"]),h.value?(o(),c("div",ma,[N(g(Q),{class:"teams-dashboard-widget__show-more",disabled:e.value,variant:"secondary",wide:"",onClick:C},{default:T(()=>[j(f(e.value?g(D)("circles","Loadingâ€¦"):g(D)("circles","More teams")),1)]),_:1},8,["disabled"])])):_("",!0)]))]))}}),ga=X(fa,[["__scopeId","data-v-16523b7c"]]),Ut=he(ga);let Nt=!1;window.addEventListener("DOMContentLoaded",()=>{vt.debug("Registering teams widget with dashboard"),window.OCA.Dashboard.register("circles",a=>{vt.debug("Mounting teams widget to element",{element:a}),a.style.height="100%",Nt&&Ut.unmount(),Ut.mount(a),Nt=!0})});
//# sourceMappingURL=teams-dashboard.mjs.map
